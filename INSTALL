LFS Book Conversion Tools Installation Instructions

After downloading the SVN source, there are some things that need to be set up 
on your computer if you want to convert the XML source into something easier to 
read (e.g. HTML, TXT, PS or PDF).  If you are interested in this, then keep 
reading.  If you are only interested in editing the XML source for re- 
submission to the lfs-book or lfs-dev mailing lists, then you do not need this 
document.  Instead, you need to read the LFS Editor's Manual.  See the LFS 
website at http://www.linuxfromscratch.org for more information.

-------------------------------------------------------------------------------
If all you want to do is convert XML to HTML perform the following:

* libxml2
  - http://www.linuxfromscratch.org/blfs/view/svn/general/libxml2.html

* libxslt
  - http://www.linuxfromscratch.org/blfs/view/svn/general/libxslt.html

* DocBook DTD 
  - http://www.linuxfromscratch.org/blfs/view/svn/pst/xml.html

* DocBook XSL Stylesheets (1.67.2)
  install -d /usr/share/xml/docbook/xsl-stylesheets-1.67.2
  chown -R root:root .
  cp -af INSTALL VERSION common eclipse extensions fo html htmlhelp images \
    javahelp lib manpages params profiling template xhtml \
    /usr/share/xml/docbook/xsl-stylesheets-1.67.2
  install -d /usr/share/doc/xml
  cp -af doc/* /usr/share/doc/xml
  cd /usr/share/xml/docbook/xsl-stylesheets-1.67.2 && \
    sed -i -e 's@current/@1.67.2/@' INSTALL && \
    sh INSTALL
  xmlcatalog --noout --add "delegateURI" \
  "http://docbook.sourceforge.net/release/xsl/1.67.2/" \
  "file:///usr/share/xml/docbook/xsl-stylesheets-1.67.2/catalog.xml" \
  /etc/xml/catalog
  ln -sf xsl-stylesheets-$(VERSION) \
    /usr/share/xml/docbook/xsl-stylesheets-current

* HTMLTidy
  - http://www.linuxfromscratch.org/blfs/view/svn/general/tidy.html
  - you'll also need the patch at http://linuxfromscratch.org/~matthew/tidy-041026-prevent_PRE_newlines-1.patch as well.

------------------------------------------------------------------------------- 
If you want to be able to convert the book into PDF as well, then you will need
the FOP package.  This takes an XSL-FO file (created with libxslt which you
already installed) and converts it to PDF.  FOP is dependent on ANT
(Another Neat Tool) and the Java Advanced Imaging (JAI) API.

First we need the Java SDK installed.  See
http://www.linuxfromscratch.org/blfs/view/svn/general/j2sdk.html.

Now install JAI:
  - Download jai-1_1_2_01-lib-linux-i586-jdk.bin from
    http://java.sun.com/products/java-media/jai/downloads/download-1_1_2_01.html
(download the version for the JDK Install).
  - chmod +x jai-1_1_2_01-lib-linux-i586-jdk.bin
  - cd /opt/j2sdk && /path/to/jai-1_1_2_01-lib-linux-i586-jdk.bin

Next install ANT:
  - download http://www.apache.org/dist/ant/source/apache-ant-1.6.2-src.tar.bz2
  - tar -xjvf apache-ant-1.6.2-src.tar.bz2
    (recent versions of tar will warn about "A lone zero block at 33476" but
    this can be safely ignored)
  - cd apache-ant-1.6.2 && \
    ./boostrap.sh && \
    ./build && \
    install -d /opt/ant && \
    cp -r dist/* /opt/ant
  - edit your bash profile to set ANT_HOME=/opt/ant and PATH=$PATH:/opt/ant/bin

And finally install FOP:
  - download http://www.apache.org/dist/xml/fop/fop-0.20.5-src.tar.gz
  - tar -xzvf fop-0.20.5-src.tar.gz
    (recent versions of tar will warn about "A lone zero block at 33476" but
    this can be safely ignored)
  - cd fop-0.20.5 &&
    ./build.sh &&
    install -d /opt/fop/{bin,lib} &&
    cp lib/{avalon-framework-cvs-20020806.jar,batik.jar} build/fop.jar \
    /opt/fop/lib &&
    cp fop.sh /opt/fop/bin
  - edit your bash profile to set FOP_HOME=/opt/fop and PATH=$PATH:/opt/fop/bin
